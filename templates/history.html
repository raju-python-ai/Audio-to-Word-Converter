<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Converted Files History</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap Bundle JS (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="../static/css/history.css">
</head>
<body>
   <div class="header">
  <button class="btn btn-danger" type="button" id="menuButton">
    <i class="fas fa-bars"></i> <!-- FontAwesome hamburger icon -->
  </button>
  <div class="logo">{{ t["appName"] }}</div>
</div>
<div id="sidebar" class="sidebar">
    <!-- Main Sidebar -->
    <div id="sidebarMain">
      <div class="sidebar-header">
        <span></span>
        <span class="close-btn" onclick="closeMenu()"><i class="fa-solid fa-circle-xmark"></i></span>
      </div>
      <a href="/dashboard" class="menu-item"><i class="fa-solid fa-square-poll-vertical"></i> <span>{{ t["dashboard"] }}</span></a>
      <a href="/history" class="menu-item"><i class="fa-solid fa-layer-group"></i>  <span>{{ t["history"] }}</span></a>
      <a href="{{ url_for('main.home') }}" class="menu-item"><i class="fa-solid fa-house"></i><span>{{ t["home"] }}</span></a>
      <a href="#" class="menu-item" onclick="showSidebarSettings()"><i class="fa-solid fa-gear"></i> <span>{{ t["settings"] }}</span></a>
      <a href="{{ url_for('auth.logout') }}" class="menu-item"><i class="fa-solid fa-right-from-bracket"></i> <span>{{ t["logout"] }}</span></a>
    </div>

    <!-- Settings Sidebar -->
    <div id="sidebarSettings" style="display:none;">
      <div class="sidebar-header">
        <button class="back-btn" onclick="showSidebarMain()"> {{ t["back"] }}</button>
      </div>
      <a href="{{ url_for('settings.settings_page', page='account') }}" class="menu-item"><i>👤</i> <span>{{ t["account"] }}</span></a>
      <a href="/settings/lang_select" class="menu-item"><i>🌐</i> <span>{{ t["language"] }}</span></a>
      <a href="/settings/version" class="menu-item"><i>📚</i> <span>{{ t["version"] }}</span></a>
      <a href="/settings/help" class="menu-item"><i>🧑‍💻❓</i> <span>{{ t["help"] }}</span></a>
      <a href="/settings/privacy" class="menu-item"><i>🔒</i> <span>{{ t["privacy"] }}</span></a>
    </div>
  </div>
 <h2>{{ t["history"] }}</h2>

{% if records_by_date %}
  {% for date, files in records_by_date.items() %}
    <div class="date-header">{{ date }}</div>
    <div class="card-container">
      {% for id, filename, filetype, converted_at in files %}
        <div class="card">
          <h3>{{ filename }}</h3>
          <p class="meta">{{ t["select_format"] }}: {{ filetype.upper() }}</p>
          <p class="meta">{{ t["converted"] }}: {{ converted_at }}</p>
          <a class="download-btn" href="{{ url_for('upload.uploaded_file', filename=filename) }}" download> {{ t["download"] }}<i class="fa-solid fa-download"></i> </a>
        </div>
      {% endfor %}
    </div>
  {% endfor %}
{% else %}
  <div class="no-records">
    <p>{{ t["no_history"] }}</p>
  </div>
{% endif %}


<script>

const menuButton = document.getElementById('menuButton');
  menuButton.addEventListener('click', () => {
    openMenu(); // call your existing openMenu function
  });
   function openMenu() {
  document.getElementById("sidebar").style.width = "250px";
}

function closeMenu() {
  document.getElementById("sidebar").style.width = "0";
}

// Show Settings sidebar
function showSidebarSettings() {
  document.getElementById("sidebarMain").style.display = "none";
  document.getElementById("sidebarSettings").style.display = "block";
}

// Show Main sidebar
function showSidebarMain() {
  document.getElementById("sidebarSettings").style.display = "none";
  document.getElementById("sidebarMain").style.display = "block";
}
</script>

</body>
</html>
